<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Register & Login</title>
<style>
  body {
    font-family: Consolas, monospace;
    background: #000;
    color: #0ff;
    text-align: center;
    padding: 40px;
  }
  input, button {
    padding: 10px;
    margin: 8px;
    font-size: 16px;
  }
  button {
    cursor: pointer;
    border-radius: 6px;
    border: none;
    background: #00ffff;
    color: #000;
    font-weight: bold;
  }
  button:hover {
    background: #00cccc;
  }
  .hidden {
    display: none;
  }
</style>
</head>
<body>

<h1 id="title">Register</h1>

<div id="form-container">
  <input id="username" placeholder="Username" /><br />
  <input id="password" type="password" placeholder="Password" /><br />
  <button id="submit-btn">Register</button><br />
  <button id="toggle-btn">Switch to Login</button>
  <p id="message"></p>
</div>

<div id="black-screen" class="hidden" style="background:#000; height: 80vh; display:flex; flex-direction: column; justify-content: center; align-items: center;">
  <button id="forbidden-btn" style="font-size: 22px; padding: 20px 40px; background: red; color: white; box-shadow: 0 0 20px red;">Access the forbidden link</button>
</div>

<script>
  const submitBtn = document.getElementById('submit-btn');
  const toggleBtn = document.getElementById('toggle-btn');
  const messageP = document.getElementById('message');
  const title = document.getElementById('title');
  const formContainer = document.getElementById('form-container');
  const blackScreen = document.getElementById('black-screen');
  const forbiddenBtn = document.getElementById('forbidden-btn');

  let isRegister = true;
  let users = JSON.parse(localStorage.getItem('users') || '{}');
  let loggedInUser = localStorage.getItem('loggedInUser');

  function saveUsers() {
    localStorage.setItem('users', JSON.stringify(users));
  }

  function showMessage(text, isError = false) {
    messageP.textContent = text;
    messageP.style.color = isError ? 'red' : '#0ff';
  }

  function showBlackScreen() {
    formContainer.classList.add('hidden');
    blackScreen.classList.remove('hidden');
    title.textContent = `Welcome, ${loggedInUser}!`;
  }

  function showForm() {
    formContainer.classList.remove('hidden');
    blackScreen.classList.add('hidden');
    title.textContent = isRegister ? 'Register' : 'Login';
    showMessage('');
  }

  if (loggedInUser) {
    showBlackScreen();
  } else {
    showForm();
  }

  submitBtn.addEventListener('click', () => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;

    if (!username || !password) {
      showMessage('Username and password cannot be empty', true);
      return;
    }

    if (isRegister) {
      if (users[username]) {
        showMessage('Username already exists', true);
      } else {
        users[username] = password;
        saveUsers();
        showMessage('Registered successfully! Please login now.');
        isRegister = false;
        title.textContent = 'Login';
        submitBtn.textContent = 'Login';
        toggleBtn.textContent = 'Switch to Register';
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
      }
    } else {
      if (users[username] && users[username] === password) {
        loggedInUser = username;
        localStorage.setItem('loggedInUser', username);
        // <-- Instead of taking you to website, show black screen page with button
        showBlackScreen();
      } else {
        showMessage('Invalid username or password', true);
      }
    }
  });

  toggleBtn.addEventListener('click', () => {
    isRegister = !isRegister;
    showForm();
    submitBtn.textContent = isRegister ? 'Register' : 'Login';
    toggleBtn.textContent = isRegister ? 'Switch to Login' : 'Switch to Register';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
  });

  forbiddenBtn.addEventListener('click', () => {
    window.location.href = 'https://docs.google.com/document/d/17V0c42kK7rWt0fQr4QscPvdpojCMGOrtaEppNhSznmE/edit?usp=sharing';
  });
</script>

</body>
</html>
