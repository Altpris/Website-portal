<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Register & Login Portal</title>
<style>
  body { font-family: Consolas, monospace; background: #000; color: #0ff; text-align: center; padding: 40px; }
  input, button { padding: 10px; margin: 5px; font-size: 16px; }
  .hidden { display: none; }
  button { cursor: pointer; border-radius: 5px; border: none; background: #00ffff; color: #000; font-weight: bold; }
  button:hover { background: #00cccc; }
</style>
</head>
<body>

<h1 id="title">Register</h1>

<!-- Register & Login Forms -->
<div id="form-container">
  <input id="username" placeholder="Username" /><br />
  <input id="password" type="password" placeholder="Password" /><br />
  <button id="submit-btn">Register</button><br />
  <button id="toggle-btn">Switch to Login</button>
  <p id="message"></p>
</div>

<!-- Portal Page (hidden by default) -->
<div id="portal" class="hidden">
  <h2>Welcome to the Portal!</h2>
  <button id="chosenOneBtn">Chosen one website with fun links</button>
  <!-- Later you can add more buttons here -->
</div>

<script>
  const submitBtn = document.getElementById('submit-btn');
  const toggleBtn = document.getElementById('toggle-btn');
  const messageP = document.getElementById('message');
  const title = document.getElementById('title');
  const formContainer = document.getElementById('form-container');
  const portal = document.getElementById('portal');
  const chosenOneBtn = document.getElementById('chosenOneBtn');

  let isRegister = true;
  let users = JSON.parse(localStorage.getItem('users') || '{}');
  let loggedInUser = localStorage.getItem('loggedInUser');

  function saveUsers() {
    localStorage.setItem('users', JSON.stringify(users));
  }

  function showMessage(text, isError = false) {
    messageP.textContent = text;
    messageP.style.color = isError ? 'red' : '#0ff';
  }

  function showPortal() {
    formContainer.classList.add('hidden');
    portal.classList.remove('hidden');
    title.textContent = `Welcome, ${loggedInUser}!`;
  }

  function showForm() {
    formContainer.classList.remove('hidden');
    portal.classList.add('hidden');
    title.textContent = isRegister ? 'Register' : 'Login';
    showMessage('');
  }

  if (loggedInUser) {
    // If user already logged in, show portal directly
    showPortal();
  } else {
    showForm();
  }

  submitBtn.addEventListener('click', () => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;

    if (!username || !password) {
      showMessage('Username and password cannot be empty', true);
      return;
    }

    if (isRegister) {
      if (users[username]) {
        showMessage('Username already exists', true);
      } else {
        users[username] = password;
        saveUsers();
        showMessage('Registered successfully! Please login now.');
        isRegister = false;
        title.textContent = 'Login';
        submitBtn.textContent = 'Login';
        toggleBtn.textContent = 'Switch to Register';
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
      }
    } else {
      if (users[username] && users[username] === password) {
        loggedInUser = username;
        localStorage.setItem('loggedInUser', username);
        showPortal();
      } else {
        showMessage('Invalid username or password', true);
      }
    }
  });

  toggleBtn.addEventListener('click', () => {
    isRegister = !isRegister;
    showForm();
    submitBtn.textContent = isRegister ? 'Register' : 'Login';
    toggleBtn.textContent = isRegister ? 'Switch to Login' : 'Switch to Register';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
  });

  chosenOneBtn.addEventListener('click', () => {
    // Replace this URL with your actual “chosen one” website link
    window.location.href = 'https://docs.google.com/document/d/17V0c42kK7rWt0fQr4QscPvdpojCMGOrtaEppNhSznmE/edit?usp=sharing';
  });
</script>

</body>
</html>
